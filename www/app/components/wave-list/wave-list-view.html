<ion-view view-title="Series {{ ::viewCtrl.seriesId }}">
	<ion-nav-buttons side="primary">
		<div class="nav-icon-buttons">
			<button class="button button-clear"
					ng-click="viewCtrl.toggleOnlyOwned()"
					ng-class="{
						'filter-button-active' : !viewCtrl.isFilteringOwned
					}"
			>
				<span class="ion-android-funnel"></span>
			</button>
			<button class="button button-clear"
					ng-show="viewCtrl.viewState === 'list'"
					ng-click="viewCtrl.viewState = 'grid'"
			>
				<span class="ion-grid"></span>
			</button>
			<button class="button button-clear"
					ng-show="viewCtrl.viewState === 'grid'"
					ng-click="viewCtrl.viewState = 'list'"
			>
				<span class="ion-navicon-round"></span>
			</button>
			<button class="button button-clear"
					ng-click="viewCtrl.showSearch()"
			>
				<span class="ion-android-search"></span>
			</button>
		</div>
	</ion-nav-buttons>
	<ion-header-bar class="bar bar-subheader item-input-inset bar-light"
					ng-if="viewCtrl.searchShown"
	>
		<label class="item-input-wrapper">
			<i class="icon ion-ios-search placeholder-icon"></i>
			<input type="search"
				   placeholder="Search..."
				   ng-model="viewCtrl.searchFilter"
				   ng-keyup="viewCtrl.filterCards()"
				>
		</label>
		<button class="button button-clear"
				ng-click="viewCtrl.hideSearch()"
		>
			Cancel
		</button>
	</ion-header-bar>
	<ion-content lazy-scroll
				 class="wave-list-view"
				 ng-class="[ 'card-series--' + viewCtrl.seriesId ]"
	>
		<div class="list-wrapper"
			 ng-class="{
				'list-wrapper--searching' : viewCtrl.searchShown,
				'list-wrapper--state-grid' : viewCtrl.viewState === 'grid',
				'list-wrapper--state-list' : viewCtrl.viewState === 'list'
			 }"
		>
			<div ng-if="viewCtrl.setNotReleased"
				 class="not-released-disclaimer"
			>
				This set has not been released.
			</div>
			<div ng-if="!viewCtrl.setNotReleased && viewCtrl.visibleCards.length === 0 && viewCtrl.searchShown"
				 class="no-matches-found"
			>
				No matches found.
			</div>
			<div ng-repeat="card in viewCtrl.visibleCards track by card.id"
				 ng-show="!viewCtrl.isFilteringOwned || !card.isOwned"
				 class="list-card"
				 ng-class="{ 'card-owned' : card.isOwned }"
			>
				<div class="list-card-list-wrapper" ng-if="viewCtrl.viewState === 'list'">
					<span class="list-card-list-cell list-card-number">{{ ::card.id }}</span>
					<a class="list-card-list-cell list-card-name"
					   ng-href="#/app/card-detail/{{ ::viewCtrl.seriesId }}/{{ ::card.id }}"
					>{{ ::card.name }}</a>
					<span class="list-card-list-cell list-card-ownership">
						<a class="interaction-checkbox"
						   ng-click="viewCtrl.toggleCardOwnership(card)"
						>
							<span class="interaction-checkbox-icon"
								  ng-class="{
									'ion-android-checkbox-outline' : card.isOwned,
									'ion-android-checkbox-outline-blank' : !card.isOwned
							   }"
							></span>
						</a>
					</span>
				</div>
				<span class="list-card-img-wrapper" ng-if="viewCtrl.viewState === 'grid'">
					<a class="list-card-img-link"
					   ng-href="#/app/card-detail/{{ ::viewCtrl.seriesId }}/{{ ::card.id }}"
					>
						<img alt="{{ ::card.name }}"
							 class="list-card-img"
							 ng-src="img/cards/loading.png"
							 image-lazy-distance-from-bottom-to-load="100"
							 image-lazy-src="img/cards/wave-{{ ::viewCtrl.seriesId }}/{{ ::card.id }}.png"
							>
					</a>
					<a class="interaction-checkbox"
						ng-click="viewCtrl.toggleCardOwnership(card)"
					>
						<span class="interaction-checkbox-icon"
							ng-class="{
								'ion-android-checkbox' : card.isOwned,
								'ion-android-checkbox-blank' : !card.isOwned
						   }"
						></span>
					</a>
				</span>
			</div>
		</div>
	</ion-content>
</ion-view>
